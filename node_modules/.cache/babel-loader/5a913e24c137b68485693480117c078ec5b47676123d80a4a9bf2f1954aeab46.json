{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PropertyList(){const[properties,setProperties]=useState([]);const[errorMessage,setErrorMessage]=useState('');const[selectedLocation,setSelectedLocation]=useState('all');useEffect(()=>{getProperties();},[selectedLocation]);const getProperties=async()=>{try{const response=await fetch(`/api/properties${selectedLocation!=='all'?`?location=${selectedLocation}`:''}`);const data=await response.json();if(!data||data.length===0){setErrorMessage('未找到该位置的房源。');setProperties([]);}else{setProperties(data);setErrorMessage('');}}catch(error){console.error('获取房源时出错:',error);setErrorMessage('加载房源失败，请稍后重试。');}};const formatDate=dateString=>{const date=new Date(dateString);const year=date.getFullYear();const month=(date.getMonth()+1).toString().padStart(2,'0');const day=date.getDate().toString().padStart(2,'0');return`${year}年${month}月${day}日`;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"nav\",{className:\"nav-links\",children:['SS13','SS15','CasaTiara','IconCity','Greenfield','GeoLake','GeoSense','Union','Edumetro'].map(location=>/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:()=>setSelectedLocation(location),children:location},location))}),/*#__PURE__*/_jsxs(\"main\",{id:\"property-list\",children:[errorMessage&&/*#__PURE__*/_jsx(\"p\",{children:errorMessage}),properties.map(property=>/*#__PURE__*/_jsxs(\"div\",{className:`property-card ${property.rented?'rented':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:property.images&&property.images[0]?`/api/images/${property.images[0]}`:'default-image.jpg',alt:\"\\u623F\\u6E90\\u56FE\\u7247\"}),property.rented&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay-text\",children:\"\\u4E0D\\u597D\\u610F\\u601D\\uFF0C\\u6B64\\u5355\\u4F4D\\u5DF2\\u7ECF\\u51FA\\u79DF\\uFF01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"property-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:property.name||'无可用标题'}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"\\u4EF7\\u683C: \",property.price?`RM${property.price}`:'未提供价格']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u5367\\u5BA4: \",property.rooms||'无卧室信息']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6D74\\u5BA4: \",property.bathrooms||'无浴室信息']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u63CF\\u8FF0: \",property.description||'无描述']}),/*#__PURE__*/_jsxs(\"p\",{className:\"available-date\",children:[\"\\u53EF\\u5165\\u4F4F\\u65F6\\u95F4: \",property.availableDate?formatDate(property.availableDate):'无可入住日期信息']}),/*#__PURE__*/_jsx(\"div\",{className:\"meta-info\",children:property.tags&&property.tags.map((tag,index)=>/*#__PURE__*/_jsx(\"span\",{children:tag},index))})]})]},property.id))]})]});}export default PropertyList;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","PropertyList","properties","setProperties","errorMessage","setErrorMessage","selectedLocation","setSelectedLocation","getProperties","response","fetch","data","json","length","error","console","formatDate","dateString","date","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","children","className","map","location","href","onClick","id","property","rented","src","images","alt","name","price","rooms","bathrooms","description","availableDate","tags","tag","index"],"sources":["/Users/marcus/Desktop/EasyRentHub Project/easy-rent-hub-user/src/pages/PropertyList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction PropertyList() {\n  const [properties, setProperties] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [selectedLocation, setSelectedLocation] = useState('all');\n\n  useEffect(() => {\n    getProperties();\n  }, [selectedLocation]);\n\n  const getProperties = async () => {\n    try {\n      const response = await fetch(`/api/properties${selectedLocation !== 'all' ? `?location=${selectedLocation}` : ''}`);\n      const data = await response.json();\n\n      if (!data || data.length === 0) {\n        setErrorMessage('未找到该位置的房源。');\n        setProperties([]);\n      } else {\n        setProperties(data);\n        setErrorMessage('');\n      }\n    } catch (error) {\n      console.error('获取房源时出错:', error);\n      setErrorMessage('加载房源失败，请稍后重试。');\n    }\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const year = date.getFullYear();\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const day = date.getDate().toString().padStart(2, '0');\n    return `${year}年${month}月${day}日`;\n  };\n\n  return (\n    <div>\n      <nav className=\"nav-links\">\n        {['SS13', 'SS15', 'CasaTiara', 'IconCity', 'Greenfield', 'GeoLake', 'GeoSense', 'Union', 'Edumetro'].map((location) => (\n          <a href=\"#\" key={location} onClick={() => setSelectedLocation(location)}>{location}</a>\n        ))}\n      </nav>\n\n      <main id=\"property-list\">\n        {errorMessage && <p>{errorMessage}</p>}\n        {properties.map((property) => (\n          <div key={property.id} className={`property-card ${property.rented ? 'rented' : ''}`}>\n            <div className=\"image-container\">\n              <img src={property.images && property.images[0] ? `/api/images/${property.images[0]}` : 'default-image.jpg'} alt=\"房源图片\" />\n              {property.rented && <div className=\"overlay-text\">不好意思，此单位已经出租！</div>}\n            </div>\n            <div className=\"property-details\">\n              <h2>{property.name || '无可用标题'}</h2>\n              <p className=\"price\">价格: {property.price ? `RM${property.price}` : '未提供价格'}</p>\n              <p>卧室: {property.rooms || '无卧室信息'}</p>\n              <p>浴室: {property.bathrooms || '无浴室信息'}</p>\n              <p>描述: {property.description || '无描述'}</p>\n              <p className=\"available-date\">可入住时间: {property.availableDate ? formatDate(property.availableDate) : '无可入住日期信息'}</p>\n              <div className=\"meta-info\">\n                {property.tags && property.tags.map((tag, index) => <span key={index}>{tag}</span>)}\n              </div>\n            </div>\n          </div>\n        ))}\n      </main>\n    </div>\n  );\n}\n\nexport default PropertyList;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACtB,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACS,YAAY,CAAEC,eAAe,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACW,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAE/DC,SAAS,CAAC,IAAM,CACdY,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,CAACF,gBAAgB,CAAC,CAAC,CAEtB,KAAM,CAAAE,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,kBAAkBJ,gBAAgB,GAAK,KAAK,CAAG,aAAaA,gBAAgB,EAAE,CAAG,EAAE,EAAE,CAAC,CACnH,KAAM,CAAAK,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAElC,GAAI,CAACD,IAAI,EAAIA,IAAI,CAACE,MAAM,GAAK,CAAC,CAAE,CAC9BR,eAAe,CAAC,YAAY,CAAC,CAC7BF,aAAa,CAAC,EAAE,CAAC,CACnB,CAAC,IAAM,CACLA,aAAa,CAACQ,IAAI,CAAC,CACnBN,eAAe,CAAC,EAAE,CAAC,CACrB,CACF,CAAE,MAAOS,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,UAAU,CAAEA,KAAK,CAAC,CAChCT,eAAe,CAAC,eAAe,CAAC,CAClC,CACF,CAAC,CAED,KAAM,CAAAW,UAAU,CAAIC,UAAU,EAAK,CACjC,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,UAAU,CAAC,CACjC,KAAM,CAAAG,IAAI,CAAGF,IAAI,CAACG,WAAW,CAAC,CAAC,CAC/B,KAAM,CAAAC,KAAK,CAAG,CAACJ,IAAI,CAACK,QAAQ,CAAC,CAAC,CAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAC/D,KAAM,CAAAC,GAAG,CAAGR,IAAI,CAACS,OAAO,CAAC,CAAC,CAACH,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACtD,MAAO,GAAGL,IAAI,IAAIE,KAAK,IAAII,GAAG,GAAG,CACnC,CAAC,CAED,mBACE1B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAD,QAAA,CACvB,CAAC,MAAM,CAAE,MAAM,CAAE,WAAW,CAAE,UAAU,CAAE,YAAY,CAAE,SAAS,CAAE,UAAU,CAAE,OAAO,CAAE,UAAU,CAAC,CAACE,GAAG,CAAEC,QAAQ,eAChHjC,IAAA,MAAGkC,IAAI,CAAC,GAAG,CAAgBC,OAAO,CAAEA,CAAA,GAAM1B,mBAAmB,CAACwB,QAAQ,CAAE,CAAAH,QAAA,CAAEG,QAAQ,EAAjEA,QAAqE,CACvF,CAAC,CACC,CAAC,cAEN/B,KAAA,SAAMkC,EAAE,CAAC,eAAe,CAAAN,QAAA,EACrBxB,YAAY,eAAIN,IAAA,MAAA8B,QAAA,CAAIxB,YAAY,CAAI,CAAC,CACrCF,UAAU,CAAC4B,GAAG,CAAEK,QAAQ,eACvBnC,KAAA,QAAuB6B,SAAS,CAAE,iBAAiBM,QAAQ,CAACC,MAAM,CAAG,QAAQ,CAAG,EAAE,EAAG,CAAAR,QAAA,eACnF5B,KAAA,QAAK6B,SAAS,CAAC,iBAAiB,CAAAD,QAAA,eAC9B9B,IAAA,QAAKuC,GAAG,CAAEF,QAAQ,CAACG,MAAM,EAAIH,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC,CAAG,eAAeH,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC,EAAE,CAAG,mBAAoB,CAACC,GAAG,CAAC,0BAAM,CAAE,CAAC,CACzHJ,QAAQ,CAACC,MAAM,eAAItC,IAAA,QAAK+B,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,gFAAa,CAAK,CAAC,EAClE,CAAC,cACN5B,KAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/B9B,IAAA,OAAA8B,QAAA,CAAKO,QAAQ,CAACK,IAAI,EAAI,OAAO,CAAK,CAAC,cACnCxC,KAAA,MAAG6B,SAAS,CAAC,OAAO,CAAAD,QAAA,EAAC,gBAAI,CAACO,QAAQ,CAACM,KAAK,CAAG,KAAKN,QAAQ,CAACM,KAAK,EAAE,CAAG,OAAO,EAAI,CAAC,cAC/EzC,KAAA,MAAA4B,QAAA,EAAG,gBAAI,CAACO,QAAQ,CAACO,KAAK,EAAI,OAAO,EAAI,CAAC,cACtC1C,KAAA,MAAA4B,QAAA,EAAG,gBAAI,CAACO,QAAQ,CAACQ,SAAS,EAAI,OAAO,EAAI,CAAC,cAC1C3C,KAAA,MAAA4B,QAAA,EAAG,gBAAI,CAACO,QAAQ,CAACS,WAAW,EAAI,KAAK,EAAI,CAAC,cAC1C5C,KAAA,MAAG6B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,EAAC,kCAAO,CAACO,QAAQ,CAACU,aAAa,CAAG7B,UAAU,CAACmB,QAAQ,CAACU,aAAa,CAAC,CAAG,UAAU,EAAI,CAAC,cACnH/C,IAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAD,QAAA,CACvBO,QAAQ,CAACW,IAAI,EAAIX,QAAQ,CAACW,IAAI,CAAChB,GAAG,CAAC,CAACiB,GAAG,CAAEC,KAAK,gBAAKlD,IAAA,SAAA8B,QAAA,CAAmBmB,GAAG,EAAXC,KAAkB,CAAC,CAAC,CAChF,CAAC,EACH,CAAC,GAfEb,QAAQ,CAACD,EAgBd,CACN,CAAC,EACE,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAjC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}